<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one or more
  ~ contributor license agreements.  See the NOTICE file distributed with
  ~ this work for additional information regarding copyright ownership.
  ~ The ASF licenses this file to You under the Apache License, Version 2.0
  ~ (the "License"); you may not use this file except in compliance with
  ~ the License.  You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<sql-parser-test-cases>
    <alter-sharding-table-rule sql-case-id="alter-sharding-table-rule">
        <rule name="t_order" table-strategy-column="order_id" key-generate-strategy-column="another_id">
            <data-source>ms_group_0</data-source>
            <data-source>ms_group_1</data-source>
            <table-strategy algorithm-name="hash_mod">
                <properties>
                    <property key="sharding-count" value="4"/>
                </properties>
            </table-strategy>
            <key-generate-strategy algorithm-name="snowflake">
                <properties>
                    <property key="worker-id" value="123"/>
                </properties>
            </key-generate-strategy>
        </rule>
    </alter-sharding-table-rule>

    <alter-sharding-table-rule sql-case-id="alter-sharding-table-rule-with-inline-expression">
        <rule name="t_order" table-strategy-column="order_id" key-generate-strategy-column="another_id">
            <data-source>ms_group_${0..1}</data-source>
            <table-strategy algorithm-name="hash_mod">
                <properties>
                    <property key="sharding-count" value="4"/>
                </properties>
            </table-strategy>
            <key-generate-strategy algorithm-name="snowflake">
                <properties>
                    <property key="worker-id" value="123"/>
                </properties>
            </key-generate-strategy>
        </rule>
    </alter-sharding-table-rule>

    <alter-sharding-binding-table-rules sql-case-id="alter-sharding-binding-table-rules">
        <rule table-groups="t_order,t_order_item"/>
        <rule table-groups="t_1,t_2"/>
    </alter-sharding-binding-table-rules>

    <alter-sharding-broadcast-table-rules sql-case-id="alter-sharding-broadcast-table-rules">
        <table>t_1</table>
        <table>t_2</table>
    </alter-sharding-broadcast-table-rules>

    <alter-readwrite-splitting-rule sql-case-id="alter-readwrite-splitting-rule">
        <rule name="ms_group_0" auto-aware-resource="group_0" load-balancer="random">
            <properties>
                <property key="read_weight" value="'2:1'"/>
            </properties>
        </rule>
        <rule name="ms_group_1" write-data-source="primary_ds" load-balancer="random">
            <read-data-source>replica_ds_0</read-data-source>
            <read-data-source>replica_ds_1</read-data-source>
        </rule>
    </alter-readwrite-splitting-rule>

    <alter-database-discovery-rule sql-case-id="alter-database-discovery-rule">
        <rule name="ha_group_0" type="mgr">
            <data-source>resource0</data-source>
            <data-source>resource1</data-source>
            <properties>
                <property key="keepAliveCron" value=""/>
                <property key="groupName" value="92504d5b-6dec"/>
            </properties>
        </rule>
        <rule name="ha_group_1" type="mgr2">
            <data-source>resource2</data-source>
            <data-source>resource3</data-source>
            <properties>
                <property key="keepAliveCron" value=""/>
                <property key="groupName" value="92504d5b-6dec-2"/>
            </properties>
        </rule>
    </alter-database-discovery-rule>

    <alter-encrypt-rule sql-case-id="alter-encrypt-rule">
        <rule name="t_encrypt">
            <column name="user_id" plain-column="user_plain" cipher-column="user_cipher">
                <encryptor algorithm-name="AES">
                    <properties>
                        <property key="aes-key-value" value="123456abc"/>
                    </properties>
                </encryptor>
            </column>
            <column name="order_id" cipher-column="order_cipher">
                <encryptor algorithm-name="MD5"/>
            </column>
        </rule>
    </alter-encrypt-rule>
</sql-parser-test-cases>
