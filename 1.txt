CREATE DATABASE sharding_db;\r\nUSE sharding_db;\r\nADD RESOURCE ds_0 (\r\nURL=\"jdbc:mysql://127.0.0.1:3306/demo_sharding_ds_0?serverTimezone=UTC&useSSL=false\",\r\nUSER=\"root\",\r\nPASSWORD=\"12345678\",\r\nPROPERTIES(\"minPoolSize\"=\"1\",\"connectionTimeoutMilliseconds\"=\"30000\",\"maxLifetimeMilliseconds\"=\"1800000\",\"idleTimeoutMilliseconds\"=\"60000\",\"maxPoolSize\"=\"50\")\r\n), ds_1 (\r\nURL=\"jdbc:mysql://127.0.0.1:3306/demo_sharding_ds_1?serverTimezone=UTC&useSSL=false\",\r\nUSER=\"root\",\r\nPASSWORD=\"12345678\",\r\nPROPERTIES(\"minPoolSize\"=\"1\",\"connectionTimeoutMilliseconds\"=\"30000\",\"maxLifetimeMilliseconds\"=\"1800000\",\"idleTimeoutMilliseconds\"=\"60000\",\"maxPoolSize\"=\"50\")\r\n);\r\nCREATE SHARDING ALGORITHM database_inline (\r\nTYPE(NAME=\"inline\", PROPERTIES(\"algorithm-expression\"=\"ds_${user_id % 2}\",\"datetime-lower\"=\"2022-01-01 00:00:00\"))\r\n), t_order_inline (\r\nTYPE(NAME=\"inline\", PROPERTIES(\"algorithm-expression\"=\"t_order_${order_id % 2}\",\"datetime-lower\"=\"2022-01-01 00:00:00\"))\r\n), t_order_item_inline (\r\nTYPE(NAME=\"inline\", PROPERTIES(\"algorithm-expression\"=\"t_order_item_${order_id % 2}\",\"datetime-lower\"=\"2022-01-01 00:00:00\"))\r\n);\r\nCREATE SHARDING KEY GENERATOR snowflake (\r\nTYPE(NAME=\"SNOWFLAKE\")\r\n);\r\nCREATE SHARDING TABLE RULE t_order (\r\nDATANODES(\"ds_${0..1}.t_order_${0..1}\"),\r\nTABLE_STRATEGY(TYPE=\"complex\", SHARDING_COLUMNS=order_id, user_id, SHARDING_ALGORITHM=t_order_inline),\r\nKEY_GENERATE_STRATEGY(COLUMN=order_id, KEY_GENERATOR=snowflake)\r\n), t_order_item (\r\nDATANODES(\"ds_${0..1}.t_order_item_${0..1}\"),\r\nTABLE_STRATEGY(TYPE=\"complex\", SHARDING_COLUMNS=order_id, user_id, SHARDING_ALGORITHM=t_order_item_inline),\r\nKEY_GENERATE_STRATEGY(COLUMN=order_item_id, KEY_GENERATOR=snowflake)\r\n);\r\nCREATE SHARDING BINDING TABLE RULES (t_order,t_order_item);\r\nCREATE SHARDING BROADCAST TABLE RULES (t_order,t_order_item);\r\n