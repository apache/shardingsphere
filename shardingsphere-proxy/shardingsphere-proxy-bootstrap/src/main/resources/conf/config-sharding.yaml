dataSources:
  ds_0:
    connectionTimeoutMilliseconds: 30000
    idleTimeoutMilliseconds: 60000
    maxLifetimeMilliseconds: 1800000
    maxPoolSize: 4096
    minPoolSize: 10
    password: hVsHb4O2LwO35UxDYJ5aAPDgCPkjQSyDzoXIZSLrtp0Us96MVrf3xly4qD54OA1o
    url: jdbc:postgresql://192.168.0.34:40100/ds_0?serverTimezone=UTC&useSSL=false
    username: test
rules:
- !SHARDING
    bindingTables:
      - bmsql_warehouse, bmsql_customer
      - bmsql_stock, bmsql_district, bmsql_order_line
    defaultDatabaseStrategy:
      none: null
    defaultTableStrategy:
      none: null
    keyGenerators:
      snowflake:
        props:
          worker-id: 123
        type: SNOWFLAKE
    shardingAlgorithms:
      database_inline:
        props:
          algorithm-expression: ds_${user_id % 2}
        type: INLINE
      ds_bmsql_config_inline:
        props:
          algorithm-expression: ds_${cfg_id % 1}
        type: INLINE
      ds_bmsql_customer_inline:
        props:
          algorithm-expression: ds_${c_w_id % 1}
        type: INLINE
      ds_bmsql_district_inline:
        props:
          algorithm-expression: ds_${d_w_id % 1}
        type: INLINE
      ds_bmsql_history_inline:
        props:
          algorithm-expression: ds_${h_w_id % 1}
        type: INLINE
      ds_bmsql_item_inline:
        props:
          algorithm-expression: ds_${i_id % 1}
        type: INLINE
      ds_bmsql_new_order_inline:
        props:
          algorithm-expression: ds_${no_w_id % 1}
        type: INLINE
      ds_bmsql_oorder_inline:
        props:
          algorithm-expression: ds_${o_w_id % 1}
        type: INLINE
      ds_bmsql_order_line_inline:
        props:
          algorithm-expression: ds_${ol_w_id % 1}
        type: INLINE
      ds_bmsql_stock_inline:
        props:
          algorithm-expression: ds_${s_w_id % 1}
        type: INLINE
      ds_bmsql_warehouse_inline:
        props:
          algorithm-expression: ds_${w_id % 1}
        type: INLINE
      tb_bmsql_config_inline:
        props:
          algorithm-expression: bmsql_config_${cfg_id % 1}
        type: INLINE
      tb_bmsql_customer_inline:
        props:
          algorithm-expression: bmsql_customer_${c_w_id % 1}
        type: INLINE
      tb_bmsql_district_inline:
        props:
          algorithm-expression: bmsql_district_${d_w_id % 1}
        type: INLINE
      tb_bmsql_history_inline:
        props:
          algorithm-expression: bmsql_history_${h_w_id % 1}
        type: INLINE
      tb_bmsql_item_inline:
        props:
          algorithm-expression: bmsql_item_${i_id % 1}
        type: INLINE
      tb_bmsql_new_order_inline:
        props:
          algorithm-expression: bmsql_new_order_${no_w_id % 1}
        type: INLINE
      tb_bmsql_oorder_inline:
        props:
          algorithm-expression: bmsql_oorder_${o_w_id % 1}
        type: INLINE
      tb_bmsql_order_line_inline:
        props:
          algorithm-expression: bmsql_order_line_${ol_w_id % 1}
        type: INLINE
      tb_bmsql_stock_inline:
        props:
          algorithm-expression: bmsql_stock_${s_w_id % 1}
        type: INLINE
      tb_bmsql_warehouse_inline:
        props:
          algorithm-expression: bmsql_warehouse_${w_id % 1}
        type: INLINE
    tables:
      bmsql_config:
        actualDataNodes: ds_${0..0}.bmsql_config_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_config_inline
            shardingColumn: cfg_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_config_inline
            shardingColumn: cfg_id
      bmsql_customer:
        actualDataNodes: ds_${0..0}.bmsql_customer_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_customer_inline
            shardingColumn: c_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_customer_inline
            shardingColumn: c_w_id
      bmsql_district:
        actualDataNodes: ds_${0..0}.bmsql_district_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_district_inline
            shardingColumn: d_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_district_inline
            shardingColumn: d_w_id
      bmsql_history:
        actualDataNodes: ds_${0..0}.bmsql_history_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_history_inline
            shardingColumn: h_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_history_inline
            shardingColumn: h_w_id
      bmsql_item:
        actualDataNodes: ds_${0..0}.bmsql_item_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_item_inline
            shardingColumn: i_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_item_inline
            shardingColumn: i_id
      bmsql_new_order:
        actualDataNodes: ds_${0..0}.bmsql_new_order_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_new_order_inline
            shardingColumn: no_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_new_order_inline
            shardingColumn: no_w_id
      bmsql_oorder:
        actualDataNodes: ds_${0..0}.bmsql_oorder_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_oorder_inline
            shardingColumn: o_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_oorder_inline
            shardingColumn: o_w_id
      bmsql_order_line:
        actualDataNodes: ds_${0..0}.bmsql_order_line_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_order_line_inline
            shardingColumn: ol_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_order_line_inline
            shardingColumn: ol_w_id
      bmsql_stock:
        actualDataNodes: ds_${0..0}.bmsql_stock_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_stock_inline
            shardingColumn: s_w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_stock_inline
            shardingColumn: s_w_id
      bmsql_warehouse:
        actualDataNodes: ds_${0..0}.bmsql_warehouse_${0..0}
        databaseStrategy:
          standard:
            shardingAlgorithmName: ds_bmsql_warehouse_inline
            shardingColumn: w_id
        tableStrategy:
          standard:
            shardingAlgorithmName: tb_bmsql_warehouse_inline
            shardingColumn: w_id
      test_order:
        actualDataNodes: ds_0.test_order
schemaName: sharding_db
